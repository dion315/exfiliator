# Exfiliator (Purple-Team Network Control Tester)

A small, **PSK-gated** client/server tool for validating network egress/ingress controls and telemetry across **TCP**, **UDP**, and **HTTP** using **synthetic payloads**.

Intended for **authorized purple-team testing** in controlled environments.

---

## Badges

![Python](https://img.shields.io/badge/python-3.9%2B-blue)
![License](https://img.shields.io/badge/license-MIT-green)

> Adjust these to match your internal standards if needed.

---

## What it does

### Server (`exfiliator_server.py`)
- Listens on configured **TCP** and **UDP** ports and optional **HTTP** endpoint (`POST /upload`)
- Requires a **pre-shared key (PSK)** for all protocols
- Supports multiple UDP modes:
  - `reliable` (ACK every packet; slow but measurable)
  - `batched_ack` (range/batch ACKs; faster + measurable)
  - `firehose` (no DATA ACKs; fastest; reachability via HELLO ACK)
- Optional Windows-only helper:
  - Can create **temporary inbound allow rules** in Windows Defender Firewall for the specified ports
  - Can run in **dry-run** mode to print planned firewall changes without modifying the firewall
  - Removes **only** rules created by that server instance on shutdown

### Client (`exfiliator_client.py`)
- Runs tests from a JSON allowlist config file
- Outputs:
  - JSON summary to stdout
  - **HTML report** that is **timestamped by default**
- Report includes:
  - Tested ports/targets, outcomes, inference hints
  - An inline **throughput chart**
  - **Client host/device information**
  - **Best-effort network information**
  - The **server value used for testing** and a **targets summary** (supports mixed IPs/hostnames/URLs)
- Includes:
  - Progress bars
  - Verbose logging (`-v`, `-vv`)
  - “Press **Q** to quit” (still writes HTML report)
  - UDP policy controls:
    - `--allow-udp-modes` (allowlist)
    - `--udp-mode-override` (force)
  - Server selection controls:
    - `--server` (default **127.0.0.1**) used for TCP/UDP entries missing `host`
    - `--force-server` overrides **all** TCP/UDP hosts in config for a run

---

## Folder / file layout

```text
.
├─ exfiliator_client.py
├─ exfiliator_server.py
├─ README.md
├─ pt_config.test.json          # example config 
└─ pt_psk.txt                   # generated by server (DO NOT COMMIT)
